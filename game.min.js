function preload(){this.game.scale.scaleMode=Phaser.ScaleManager.EXACT_FIT,this.game.scale.setScreenSize(),this.game.scale.refresh(),game.load.image("bg","assets/bg.png"),game.load.image("platform","assets/platform.png"),game.load.image("platformEmpty","assets/platformEmpty.png"),game.load.image("rexEmpty","assets/rexEmpty.png"),game.load.image("rex1","assets/rex1.png"),game.load.image("rex2","assets/rex2.png"),game.load.image("headEmpty","assets/headEmpty.png"),game.load.image("headUp","assets/headUp.png"),game.load.image("headDown","assets/headDown.png"),game.load.image("burn","assets/rexBurn.png"),game.load.image("burnEmpty","assets/rexBurnEmpty.png"),game.load.image("jump","assets/rexJump.png"),game.load.image("jumpEmpty","assets/rexJumpEmpty.png"),game.load.image("health0","assets/health0.png"),game.load.image("health1","assets/health1.png"),game.load.image("health2","assets/health2.png"),game.load.image("health3","assets/health3.png"),game.load.image("health4","assets/health4.png"),game.load.image("health5","assets/health5.png"),game.load.image("score","assets/score.png"),game.load.image("zero","assets/0.png"),game.load.image("one","assets/1.png"),game.load.image("two","assets/2.png"),game.load.image("three","assets/3.png"),game.load.image("four","assets/4.png"),game.load.image("five","assets/5.png"),game.load.image("six","assets/6.png"),game.load.image("seven","assets/7.png"),game.load.image("eight","assets/8.png"),game.load.image("nine","assets/9.png"),game.load.image("alienCrunchEmpty","assets/alienCrunchEmpty.png"),game.load.image("alienCrunch","assets/alienCrunch.png"),game.load.image("alien1","assets/alien1.png"),game.load.image("alien1Empty","assets/alien1Empty.png"),game.load.image("alien2","assets/alien2.png"),game.load.image("alien2Empty","assets/alien2Empty.png"),game.load.image("alien3","assets/alien3.png"),game.load.image("alien3Empty","assets/alien3Empty.png"),game.load.image("legBang","assets/legBang.png"),game.load.image("legBangEmpty","assets/legBangEmpty.png"),game.load.image("ufo4Ray","assets/ufo4Ray.png"),game.load.image("ufo4RayEmpty","assets/ufo4RayEmpty.png"),game.load.image("ufo4","assets/ufo4.png"),game.load.image("ufo4Empty","assets/ufo4Empty.png"),game.load.image("ufo1","assets/ufo1.png"),game.load.image("ufo1Empty","assets/ufo1Empty.png"),game.load.image("ufo2","assets/ufo2.png"),game.load.image("ufo2Empty","assets/ufo2Empty.png"),game.load.image("ufo3","assets/ufo3.png"),game.load.image("ufo3Empty","assets/ufo3Empty.png"),game.load.image("ufo3Ray","assets/ufo3Ray.png"),game.load.image("ufo3RayEmpty","assets/ufo3RayEmpty.png"),game.load.image("ufoBang","assets/ufoBang.png"),game.load.image("ufoBangEmpty","assets/ufoBangEmpty.png"),game.load.audio("start","assets/start.wav"),game.load.audio("jump","assets/jump.wav"),game.load.audio("eat","assets/eat.wav"),game.load.audio("hurt","assets/hurt.wav")}function create(){start=game.add.audio("start"),jump=game.add.audio("jump"),eat=game.add.audio("eat"),hurt=game.add.audio("hurt"),start.play();var e=game.cache.getImage("health5").width,a=20;game.add.image(0,0,"bg"),rex=game.add.sprite(-1,309,"rex1"),rexHead=game.add.sprite(345,288,"headUp"),rexBurn=game.add.sprite(195,475,"burnEmpty"),rexJump=game.add.sprite(5,40,"jumpEmpty"),alienCrunch=game.add.sprite(340,375,"alienCrunchEmpty"),alien1=game.add.sprite(660,375,"alien1Empty"),alien2=game.add.sprite(520,390,"alien2Empty"),alien3=game.add.sprite(385,410,"alien3Empty"),legBang=game.add.sprite(277,413,"legBangEmpty"),ufo1=game.add.sprite(610,60,"ufo1Empty"),ufo2=game.add.sprite(420,50,"ufo2Empty"),ufo3=game.add.sprite(266,34,"ufo3Empty"),ufo3Ray=game.add.sprite(220,76,"ufo3RayEmpty"),ufo4=game.add.sprite(18,18,"ufo4Empty"),ufoBang=game.add.sprite(247,22,"ufoBangEmpty"),ufo4Ray=game.add.sprite(50,50,"ufo4RayEmpty"),health=game.add.sprite(game.world.width-e-a,175,"health"+healthLevel),createScoreDisplay(),createPlatforms(),loopTimer=game.time.events.loop(Phaser.Timer.SECOND*timerMult,step,this)}function addGap(){platformValues[5]=!1}function addUfo(){"ufo1Empty"==getTextureName(ufo1)&&ufo1.loadTexture("ufo1")}function advanceUfo(){"ufo1"==getTextureName(ufo1)?(ufo1.loadTexture("ufo1Empty"),ufo2.loadTexture("ufo2")):"ufo2"==getTextureName(ufo2)?(ufo2.loadTexture("ufo2Empty"),ufo3.loadTexture("ufo3")):"ufo3Ray"==getTextureName(ufo3Ray)?"ufoBang"==getTextureName(ufoBang)?(ufo3Ray.loadTexture("ufo3RayEmpty"),ufoBang.loadTexture("ufoBangEmpty"),ufo3.loadTexture("ufo3Empty"),prevScore=score,eat.play(),score+=300,updateScoreDisplay()):(hurt.play(),healthLevel--,updateHealthDisplay()):"ufo3"==getTextureName(ufo3)&&("ufoBang"==getTextureName(ufoBang)?(ufo3.loadTexture("ufo3Empty"),ufoBang.loadTexture("ufoBangEmpty"),prevScore=score,eat.play(),score+=300,updateScoreDisplay()):(ufo3Ray.loadTexture("ufo3Ray"),hurt.play(),healthLevel--,updateHealthDisplay()))}function addAlien(){"alien1Empty"==getTextureName(alien1)&&alien1.loadTexture("alien1")}function advanceAlien(){"alien1"==getTextureName(alien1)?(alien1.loadTexture("alien1Empty"),alien2.loadTexture("alien2")):"alien2"==getTextureName(alien2)?(alien2.loadTexture("alien2Empty"),alien3.loadTexture("alien3")):"alien3"==getTextureName(alien3)?(alien3.loadTexture("alien3Empty"),"alienCrunch"!=getTextureName(alienCrunch)?(legBang.loadTexture("legBang"),hurt.play(),healthLevel--,updateHealthDisplay()):alienCrunch.loadTexture("alienCrunchEmpty")):"legBang"==getTextureName(legBang)&&legBang.loadTexture("legBangEmpty")}function update(){(play&&game.input.keyboard.isDown(Phaser.Keyboard.W)&&0==jumplock||play&&game.input.activePointer.x<game.world.centerX&&game.input.activePointer.isDown&&0==jumplock)&&"rexEmpty"!=getTextureName(rex)&&(jump.play(),rex.loadTexture("rexEmpty"),rexHead.loadTexture("headEmpty"),rexJump.loadTexture("jump"),jumplock+=3,"ufo3"==getTextureName(ufo3)&&ufoBang.loadTexture("ufoBang")),(play&&game.input.keyboard.isDown(Phaser.Keyboard.D)&&0==downlock||play&&game.input.activePointer.x>game.world.centerX&&game.input.activePointer.isDown&&0==downlock)&&"rexEmpty"!=getTextureName(rex)&&headDown(),game.input.keyboard.isDown(Phaser.Keyboard.ENTER)&&!play&&(start.play(),play=!0)}function headDown(){rexHead.loadTexture("headDown"),"alien3"==getTextureName(alien3)&&(alienCrunch.loadTexture("alienCrunch"),prevScore=score,eat.play(),score+=200,updateScoreDisplay()),downlock+=2}function rexLand(){rexJump.loadTexture("jumpEmpty"),rex.loadTexture("rex1"),rexHead.loadTexture("headUp")}function rexFall(){rex.loadTexture("rexEmpty"),rexHead.loadTexture("headEmpty"),rexBurn.loadTexture("burn"),healthLevel>0&&(hurt.play(),healthLevel--,updateHealthDisplay())}function updateHealthDisplay(){health.loadTexture("health"+healthLevel)}function getTextureName(e){return e.texture.baseTexture.source.name}function step(){healthLevel>0&&play?(airborn||"jumpEmpty"==getTextureName(rexJump)?airborn&&(rexLand(),airborn=!1):(airborn=!0,platformValues[2]||(prevScore=score,score+=50,updateScoreDisplay())),"burn"==getTextureName(rexBurn)&&(rexBurn.loadTexture("burnEmpty"),rexLand()),"jump"!=getTextureName(rexJump)&&advanceRexWalk(),advancePlatforms(),"headDown"==getTextureName(rexHead)&&rexHead.loadTexture("headUp"),platformValues[1]||"rexEmpty"==getTextureName(rex)||rexFall(),jumplock>0&&jumplock--,downlock>0&&downlock--,advanceAlien(),advanceUfo(),chaosCounter--,0==chaosCounter&&(addChaos(),chaosCounter=chaosCounterInterval)):"ufo3Ray"==getTextureName(ufo3Ray)&&(hurt.play(),ufo3.loadTexture("ufo3Empty"),ufo3Ray.loadTexture("ufo3RayEmpty"),ufo4.loadTexture("ufo4"),ufo4Ray.loadTexture("ufo4Ray"),rexJump.loadTexture("jump"),rex.loadTexture("rexEmpty"),rexHead.loadTexture("headEmpty"))}function addChaos(){var e=Math.floor(3*Math.random()+1);1==e?addGap():2==e?addAlien():3==e&&addUfo()}function advancePlatforms(){platformValues.shift(),platformValues[platformValues.length]=!0,destroyPlatforms(),createPlatforms()}function destroyPlatforms(){for(i=0;i<5;i++)platforms[i].destroy()}function advanceRexWalk(){var e=getTextureName(rex);"rex1"==e?rex.loadTexture("rex2"):"rex2"==e&&rex.loadTexture("rex1")}function createPlatforms(){var e=465,a=game.cache.getImage("platform").width,t=32;for(i=0;i<5;i++)platforms[i]=game.add.sprite(game.world.centerX-(5*a+4*t)/2+i*a+i*t,e,getPlatformImage(platformValues[i]))}function createScoreDisplay(){game.add.sprite(550,20,"score");var e=20,a=game.cache.getImage("zero").width,t=5;for(i=0;i<6;i++)scoreDigits[i]=game.add.sprite(645+i*a+i*t,e,"zero");updateScoreDisplay()}function updateScoreDisplay(){Math.floor(prevScore/1e3)!=Math.floor(score/1e3)&&timerMult>.1&&(timerMult-=.1,game.time.events.remove(loopTimer),loopTimer=game.time.events.loop(Phaser.Timer.SECOND*timerMult,step,this));var e=score.toString().length;if(1e6>score)for(i=0;i<e;i++)scoreDigits[5-i].loadTexture(getTextureForNumberString(score.toString().charAt(e-i-1)))}function getTextureForNumberString(e){return"0"==e?"zero":"1"==e?"one":"2"==e?"two":"3"==e?"three":"4"==e?"four":"5"==e?"five":"6"==e?"six":"7"==e?"seven":"8"==e?"eight":"9"==e?"nine":void 0}function getPlatformImage(e){return e?"platform":"platformEmpty"}var game=new Phaser.Game(800,600,Phaser.AUTO,"",{preload:preload,create:create,update:update}),platformValues=[!0,!0,!0,!0,!0],platforms=[],scoreValues=[0,0,0,0,0,0],scoreDigits=[],score=0,rex,rexHead,rexBurn,rexJump,health,alien1,alien2,alien3,legBang,ufo1,ufo2,ufo3,ufo3Ray,ufo4Ray,ufo4,ufoBang,start,jump,eat,hurt,airborn=!1,jumplock=0,downlock=0,healthLevel=5,chaosCounter=4,chaosCounterInterval=4,loopTimer,prevScore=0,timerMult=.8,play=!1;